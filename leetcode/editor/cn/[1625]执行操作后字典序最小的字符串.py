# ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ä»¥åŠä¸¤ä¸ªæ•´æ•° a å’Œ b ã€‚å…¶ä¸­ï¼Œå­—ç¬¦ä¸² s çš„é•¿åº¦ä¸ºå¶æ•°ï¼Œä¸”ä»…ç”±æ•°å­— 0 åˆ° 9 ç»„æˆã€‚ 
# 
#  ä½ å¯ä»¥åœ¨ s ä¸ŠæŒ‰ä»»æ„é¡ºåºå¤šæ¬¡æ‰§è¡Œä¸‹é¢ä¸¤ä¸ªæ“ä½œä¹‹ä¸€ï¼š 
# 
#  
#  ç´¯åŠ ï¼šå°† a åŠ åˆ° s ä¸­æ‰€æœ‰ä¸‹æ ‡ä¸ºå¥‡æ•°çš„å…ƒç´ ä¸Šï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚æ•°å­—ä¸€æ—¦è¶…è¿‡ 9 å°±ä¼šå˜æˆ 0ï¼Œå¦‚æ­¤å¾ªç¯å¾€å¤ã€‚ä¾‹å¦‚ï¼Œs = "3456" ä¸” a =
#  5ï¼Œåˆ™æ‰§è¡Œæ­¤æ“ä½œå s å˜æˆ "3951"ã€‚ 
#  è½®è½¬ï¼šå°† s å‘å³è½®è½¬ b ä½ã€‚ä¾‹å¦‚ï¼Œs = "3456" ä¸” b = 1ï¼Œåˆ™æ‰§è¡Œæ­¤æ“ä½œå s å˜æˆ "6345"ã€‚ 
#  
# 
#  è¯·ä½ è¿”å›åœ¨ s ä¸Šæ‰§è¡Œä¸Šè¿°æ“ä½œä»»æ„æ¬¡åå¯ä»¥å¾—åˆ°çš„ å­—å…¸åºæœ€å° çš„å­—ç¬¦ä¸²ã€‚ 
# 
#  å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²é•¿åº¦ç›¸åŒï¼Œé‚£ä¹ˆå­—ç¬¦ä¸² a å­—å…¸åºæ¯”å­—ç¬¦ä¸² b å°å¯ä»¥è¿™æ ·å®šä¹‰ï¼šåœ¨ a å’Œ b å‡ºç°ä¸åŒçš„ç¬¬ä¸€ä¸ªä½ç½®ä¸Šï¼Œå­—ç¬¦ä¸² a ä¸­çš„å­—ç¬¦å‡ºç°åœ¨å­—æ¯è¡¨ä¸­çš„æ—¶
# é—´æ—©äº b ä¸­çš„å¯¹åº”å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ"0158â€ å­—å…¸åºæ¯” "0190" å°ï¼Œå› ä¸ºä¸åŒçš„ç¬¬ä¸€ä¸ªä½ç½®æ˜¯åœ¨ç¬¬ä¸‰ä¸ªå­—ç¬¦ï¼Œæ˜¾ç„¶ '5' å‡ºç°åœ¨ '9' ä¹‹å‰ã€‚ 
# 
#  
# 
#  ç¤ºä¾‹ 1ï¼š 
# 
#  
# è¾“å…¥ï¼šs = "5525", a = 9, b = 2
# è¾“å‡ºï¼š"2050"
# è§£é‡Šï¼šæ‰§è¡Œæ“ä½œå¦‚ä¸‹ï¼š
# åˆæ€ï¼š"5525"
# è½®è½¬ï¼š"2555"
# ç´¯åŠ ï¼š"2454"
# ç´¯åŠ ï¼š"2353"
# è½®è½¬ï¼š"5323"
# ç´¯åŠ ï¼š"5222"
# ç´¯åŠ ï¼š"5121"
# è½®è½¬ï¼š"2151"
# ç´¯åŠ ï¼š"2050"â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹
# æ— æ³•è·å¾—å­—å…¸åºå°äº "2050" çš„å­—ç¬¦ä¸²ã€‚
#  
# 
#  ç¤ºä¾‹ 2ï¼š 
# 
#  
# è¾“å…¥ï¼šs = "74", a = 5, b = 1
# è¾“å‡ºï¼š"24"
# è§£é‡Šï¼šæ‰§è¡Œæ“ä½œå¦‚ä¸‹ï¼š
# åˆæ€ï¼š"74"
# è½®è½¬ï¼š"47"
# ç´¯åŠ ï¼š"42"
# è½®è½¬ï¼š"24"â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹
# æ— æ³•è·å¾—å­—å…¸åºå°äº "24" çš„å­—ç¬¦ä¸²ã€‚
#  
# 
#  ç¤ºä¾‹ 3ï¼š 
# 
#  
# è¾“å…¥ï¼šs = "0011", a = 4, b = 2
# è¾“å‡ºï¼š"0011"
# è§£é‡Šï¼šæ— æ³•è·å¾—å­—å…¸åºå°äº "0011" çš„å­—ç¬¦ä¸²ã€‚
#  
# 
#  ç¤ºä¾‹ 4ï¼š 
# 
#  
# è¾“å…¥ï¼šs = "43987654", a = 7, b = 3
# è¾“å‡ºï¼š"00553311"
#  
# 
#  
# 
#  æç¤ºï¼š 
# 
#  
#  2 <= s.length <= 100 
#  s.length æ˜¯å¶æ•° 
#  s ä»…ç”±æ•°å­— 0 åˆ° 9 ç»„æˆ 
#  1 <= a <= 9 
#  1 <= b <= s.length - 1 
#  
#  Related Topics æ·±åº¦ä¼˜å…ˆæœç´¢ å¹¿åº¦ä¼˜å…ˆæœç´¢ 
#  ğŸ‘ 11 ğŸ‘ 0


# leetcode submit region begin(Prohibit modification and deletion)
class Solution:
    """
    è§£é¢˜æ€è·¯ï¼šä¸€å¼€å§‹æƒ³ç”¨åŠ¨æ€è§„åˆ’å•¥çš„ï¼Œä½†æ‰¾ä¸åˆ°æ€è·¯
    1.æšä¸¾ï¼šæ²¡æƒ³åˆ°è¿™é¢˜ç«Ÿç„¶èƒ½ç”¨æšä¸¾ï¼Œæ•°æ®æœ‰ä¸ªç‰¹æ®Šçš„åœ°æ–¹ï¼Œæ— è®ºæ˜¯ç´¯åŠ å’Œè½®è½¬ï¼Œéƒ½èƒ½å›åˆ°æœ€åˆçš„æ ·å­ï¼Œæ„Ÿè§‰è¿™æ˜¯èƒ½ç”¨æšä¸¾çš„å…³é”®ç‚¹
    """

    def __init__(self):
        self._ans = None

    def findLexSmallestString(self, s: str, a: int, b: int) -> str:
        self._ans = s
        visited = set()
        self._dfs(s, visited, a, b)
        return self._ans

    def _dfs(self, s, visited, add, move):
        visited.add(s)
        adds = self._addOpt(s, add)
        moves = self._moveOpt(s, move)

        if adds not in visited:
            self._ans = min(adds, self._ans)
            self._dfs(adds, visited, add, move)

        if moves not in visited:
            self._ans = min(moves, self._ans)
            self._dfs(moves, visited, add, move)

    def _addOpt(self, s, add):
        data = list(s)
        for i in range(1, len(s), 2):
            data[i] = str((int(s[i]) + add) % 10)
        return "".join(data)

    def _moveOpt(self, s, move):
        return s[-move:] + s[:-move]


# leetcode submit region end(Prohibit modification and deletion)
if __name__ == "__main__":
    assert Solution().findLexSmallestString(s="5525", a=9, b=2) == "2050"
    assert Solution().findLexSmallestString(s="74", a=5, b=1) == "24"
    assert Solution().findLexSmallestString(s="0011", a=4, b=2) == "0011"
    assert Solution().findLexSmallestString(s="43987654", a=7, b=3) == "00553311"
