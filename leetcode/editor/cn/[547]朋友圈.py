# ç­ä¸Šæœ‰ N åå­¦ç”Ÿã€‚å…¶ä¸­æœ‰äº›äººæ˜¯æœ‹å‹ï¼Œæœ‰äº›åˆ™ä¸æ˜¯ã€‚ä»–ä»¬çš„å‹è°Šå…·æœ‰æ˜¯ä¼ é€’æ€§ã€‚å¦‚æœå·²çŸ¥ A æ˜¯ B çš„æœ‹å‹ï¼ŒB æ˜¯ C çš„æœ‹å‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¤ä¸º A ä¹Ÿæ˜¯ C 
# çš„æœ‹å‹ã€‚æ‰€è°“çš„æœ‹å‹åœˆï¼Œæ˜¯æŒ‡æ‰€æœ‰æœ‹å‹çš„é›†åˆã€‚ 
# 
#  ç»™å®šä¸€ä¸ª N * N çš„çŸ©é˜µ Mï¼Œè¡¨ç¤ºç­çº§ä¸­å­¦ç”Ÿä¹‹é—´çš„æœ‹å‹å…³ç³»ã€‚å¦‚æœM[i][j] = 1ï¼Œè¡¨ç¤ºå·²çŸ¥ç¬¬ i ä¸ªå’Œ j ä¸ªå­¦ç”Ÿäº’ä¸ºæœ‹å‹å…³ç³»ï¼Œå¦åˆ™ä¸ºä¸çŸ¥é“ã€‚ä½ 
# å¿…é¡»è¾“å‡ºæ‰€æœ‰å­¦ç”Ÿä¸­çš„å·²çŸ¥çš„æœ‹å‹åœˆæ€»æ•°ã€‚ 
# 
#  
# 
#  ç¤ºä¾‹ 1ï¼š 
# 
#  è¾“å…¥ï¼š
# [[1,1,0],
#  [1,1,0],
#  [0,0,1]]
# è¾“å‡ºï¼š2 
# è§£é‡Šï¼šå·²çŸ¥å­¦ç”Ÿ 0 å’Œå­¦ç”Ÿ 1 äº’ä¸ºæœ‹å‹ï¼Œä»–ä»¬åœ¨ä¸€ä¸ªæœ‹å‹åœˆã€‚
# ç¬¬2ä¸ªå­¦ç”Ÿè‡ªå·±åœ¨ä¸€ä¸ªæœ‹å‹åœˆã€‚æ‰€ä»¥è¿”å› 2 ã€‚
#  
# 
#  ç¤ºä¾‹ 2ï¼š 
# 
#  è¾“å…¥ï¼š
# [[1,1,0],
#  [1,1,1],
#  [0,1,1]]
# è¾“å‡ºï¼š1
# è§£é‡Šï¼šå·²çŸ¥å­¦ç”Ÿ 0 å’Œå­¦ç”Ÿ 1 äº’ä¸ºæœ‹å‹ï¼Œå­¦ç”Ÿ 1 å’Œå­¦ç”Ÿ 2 äº’ä¸ºæœ‹å‹ï¼Œæ‰€ä»¥å­¦ç”Ÿ 0 å’Œå­¦ç”Ÿ 2 ä¹Ÿæ˜¯æœ‹å‹ï¼Œæ‰€ä»¥ä»–ä»¬ä¸‰ä¸ªåœ¨ä¸€ä¸ªæœ‹å‹åœˆï¼Œè¿”å› 1 ã€‚
#  
# 
#  
# 
#  æç¤ºï¼š 
# 
#  
#  1 <= N <= 200 
#  M[i][i] == 1 
#  M[i][j] == M[j][i] 
#  
#  Related Topics æ·±åº¦ä¼˜å…ˆæœç´¢ å¹¶æŸ¥é›† 
#  ğŸ‘ 314 ğŸ‘ 0


# leetcode submit region begin(Prohibit modification and deletion)
from typing import List


class Solution:
    """
    è§£é¢˜æ€è·¯ï¼š
    ä¸€ã€æ­¤é¢˜å’Œå²›å±¿ç±»ä¼¼ï¼Œå¥—ç”¨å²›å±¿çš„è§£é¢˜æ€è·¯ï¼Œè”é€š1åŠå…¶å‘¨å›´çš„1å³å¯
    æ¶ˆé™¤çš„æ€è·¯æ˜¯å¦‚æœå½“å‰[i][j]ä¸º1ï¼Œåˆ™æ¶ˆé™¤içš„æœ‹å‹ï¼ˆiçš„æœ‹å‹ä¸ºå·²iä¸ºè¡Œï¼Œå·²iä¸ºåˆ—çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å·²iä¸ºåå­—ä¸­å¿ƒè¿›è¡Œæ¶ˆé™¤ï¼‰ï¼Œjçš„æœ‹å‹
    æ—¶é—´å¤æ‚åº¦åº”è¯¥æ˜¯O(N^3)ï¼Œæ¶ˆé™¤å½“å‰ä½ç½®å°±éœ€è¦æ¶ˆé™¤å…¶æ‰€åœ¨çš„è¡Œå’Œåˆ—ï¼Œä¸º2Nï¼ŒåŠ ä¸Šå¤–å±‚N**2

    äºŒã€å¹¶æŸ¥é›†:å…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯å°†æœ‰å…³ç³»çš„ä¸¤ä¸ªäººï¼Œè®©ç¬¬äºŒä¸ªäººçš„çˆ¶äº²è®¤ç¬¬ä¸€ä¸ªäººçš„çˆ¶äº²åšçˆ¶äº²ï¼Œè™½ç„¶å¼€å§‹é™äº†è¾ˆåˆ†ï¼Œä½†åé¢æ‰å¹³åŒ–åå¤§å®¶ä¹Ÿä¼šæˆåŒè¾ˆ
    1.å„è‡ªè‡ªç«‹å±±å¤´ï¼Œè‡ªæˆè€ç¥–
    2.ä¸¤ä¸ªäººä¹‹é—´æœ‰å…³ç³»ï¼Œè®©ç¬¬äºŒä¸ªäººçš„è€ç¥–è®¤ç¬¬ä¸€ä¸ªäººçš„è€ç¥–åšè€ç¥–ï¼ŒåŒæ—¶åé¢æ‰å¹³åŒ–å¤„ç†
    3.éå†æŸ¥çœ‹è€ç¥–æ•°é‡ï¼ˆè‡ªå·±è€ç¥–æ˜¯è‡ªå·±çš„æ‰æ˜¯çœŸè€ç¥–ï¼‰ï¼Œè¿”å›æ•°é‡
    æ—¶é—´å¤æ‚åº¦åº”è¯¥æ˜¯O(N^3)
    """

    def findCircleNum(self, M: List[List[int]]) -> int:
        """æ–¹æ³•äºŒï¼šå¹¶æŸ¥é›†"""
        parents = [i for i in range(0, len(M))]
        for i in range(0, len(M)):
            for j in range(0, len(M[i])):
                if i != j and M[i][j] == 1:
                    self._union(parents, i, j)
        ans = 0
        for i in range(0, len(parents)):
            if parents[i] == i:
                ans += 1
        return ans

    def _union(self, parents, i, j):
        pi = self._findParent(parents, i)
        pj = self._findParent(parents, j)
        parents[pj] = pi

    def _findParent(self, parents, index):
        root = index
        while parents[root] != root:
            root = parents[root]
        while parents[index] != index:
            temp = parents[index]
            parents[index] = root
            index = temp
        return root

    def _methodOne(self, M: List[List[int]]):
        """æ–¹æ³•ä¸€"""
        ans = 0
        w, h = len(M[0]), len(M)
        for i in range(0, h):
            for j in range(0, h):
                if M[i][j] == 1:
                    ans += 1
                    self._dfs(M, i, h, w)
                    self._dfs(M, j, h, w)
        return ans

    def _dfs(self, M, index, h, w):
        """æ¶ˆé™¤ä»¥ç¬¬indexä¸ªäººçš„æ‰€æœ‰æœ‹å‹ï¼Œç½®é›¶ï¼ŒåŠåå­—ä¸­å¿ƒæ‰©å±•æ¶ˆé™¤"""
        if index < 0 or index >= h:
            return
        for col in range(0, w):
            if M[index][col] == 1:
                M[index][col] = 0
                self._dfs(M, col, h, w)
        for row in range(0, h):
            if M[row][index] == 1:
                M[row][index] = 0
                self._dfs(M, row, h, w)


# leetcode submit region end(Prohibit modification and deletion)


if __name__ == "__main__":
    M = [[1, 1, 0],
         [1, 1, 0],
         [0, 0, 1]]
    print(Solution().findCircleNum(M))
    M = [[1, 0, 0, 1],
         [0, 1, 1, 0],
         [0, 1, 1, 1],
         [1, 0, 1, 1]]
    print(Solution().findCircleNum(M))
