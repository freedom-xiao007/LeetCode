# ç»™å®šä¸€ä¸ªåªåŒ…å« '(' å’Œ ')' çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿çš„åŒ…å«æœ‰æ•ˆæ‹¬å·çš„å­ä¸²çš„é•¿åº¦ã€‚ 
# 
#  ç¤ºä¾‹ 1: 
# 
#  è¾“å…¥: "(()"
# è¾“å‡º: 2
# è§£é‡Š: æœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²ä¸º "()"
#  
# 
#  ç¤ºä¾‹ 2: 
# 
#  è¾“å…¥: ")()())"
# è¾“å‡º: 4
# è§£é‡Š: æœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²ä¸º "()()"
#  
#  Related Topics å­—ç¬¦ä¸² åŠ¨æ€è§„åˆ’ 
#  ðŸ‘ 942 ðŸ‘Ž 0


# leetcode submit region begin(Prohibit modification and deletion)
class Solution:
    """
    è§£é¢˜æ€è·¯ï¼š
    ä¸€ã€åŠ¨æ€è§„å¾‹:å‚è€ƒå®˜æ–¹é¢˜è§£
    1.é‡å¤å­ç»“æž„ï¼šï¼ˆï¼‰çš„æ±‚èŒå¾ˆå¥½ç†è§£ï¼Œï¼ˆï¼ˆï¼‰ï¼ˆï¼‰ï¼‰çš„æ±‚å€¼éœ€è¦è‡ªå·±æŒ‰ç…§å…¬å¼è¿›è¡ŒæŽ¨å¯¼åŽå°±ç†è§£äº†
    2.é€’æŽ¨çŠ¶æ€ï¼šdpã€iã€‘
    3.é€’æŽ¨å…¬å¼ï¼šï¼ˆï¼‰-->dp[i]=2,))-->dp[i] = dp[i-1]+2 + dp[i-dp[i-1]-1]
    æ³¨ï¼šæ³¨æ„è¾¹ç•Œæ¡ä»¶çš„åˆ¤æ–­å’ŒåŠ ä¸Šæœ‰æ•ˆæ‹¬å·å‰ä¸€ä¸ªè¿žç»­æœ‰æ•ˆæ‹¬å·çš„é•¿åº¦
    éåŽ†ä¸€æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N)

    äºŒã€ç”¨æ ˆå’Œæ‹¬å·çš„æœ‰æ•ˆæ€§ç»“åˆï¼šæ–¹æ³•å¾ˆå·§å¦™,æ—¶é—´å¤æ‚åº¦ä¸ºO(N)
    """

    def longestValidParentheses(self, s: str) -> int:
        size = len(s)
        dp = [0] * size
        ans = 0
        for i in range(1, size):
            if s[i] == ")":
                if s[i - 1] == "(":
                    dp[i] = 2
                    if i - 2 >= 0:
                        dp[i] += dp[i - 2]
                    ans = max(ans, dp[i])
                elif s[i - 1] == ")" and dp[i - 1] > 0 and i - dp[i - 1] - 1 >= 0 and s[i - dp[i - 1] - 1] == "(":
                    dp[i] = dp[i - 1] + 2
                    if i - dp[i - 1] - 2 >= 0:
                        dp[i] += dp[i - dp[i - 1] - 2]
                    ans = max(ans, dp[i])
        return ans
# leetcode submit region end(Prohibit modification and deletion)
